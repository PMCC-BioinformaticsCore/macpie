<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Check the metadata file • macpie</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check the metadata file">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">macpie</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="../articles/metadata_check.html">Metadata check</a></li>
    <li><a class="dropdown-item" href="../articles/quality_control.html">Quality control</a></li>
    <li><a class="dropdown-item" href="../articles/differential_expression.html">Transcriptional analyses</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Compound screening</h6></li>
    <li><a class="dropdown-item" href="../articles/macpie_conversion.html">Interoperability</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="https://github.com/PMCC-BioinformaticsCore/macpie.git"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check the metadata file</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PMCC-BioinformaticsCore/macpie.git/blob/HEAD/vignettes/metadata_check.Rmd"><code>vignettes/metadata_check.Rmd</code></a></small>
      <div class="d-none name"><code>metadata_check.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="metadata-import-and-validation">Metadata import and validation<a class="anchor" aria-label="anchor" href="#metadata-import-and-validation"></a>
</h2>
<p>As part of the macpie package, we provide a set of functions to
import and validate metadata. The metadata file should contain all the
information about the samples, including sample names, experimental
conditions, and other relevant variables. The metadata file has to be in
a tabular format.</p>
<p><strong>Key points</strong>:</p>
<ul>
<li><p>use <strong>check_metadata</strong> to check the metadata file
for common errors</p></li>
<li><p>use <strong>plot_metadata_heatmap</strong> to visually inspect
metadata integrity</p></li>
</ul>
<div class="section level3">
<h3 id="metadata-input">Metadata input<a class="anchor" aria-label="anchor" href="#metadata-input"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/PMCC-BioinformaticsCore/macpie.git">macpie</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define project variables</span></span>
<span><span class="va">project_name</span> <span class="op">&lt;-</span> <span class="st">"PMMSq033"</span></span>
<span><span class="va">project_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/PMMSq033_metadata.csv"</span>, package <span class="op">=</span> <span class="st">"macpie"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load metadata</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_metadata.html">read_metadata</a></span><span class="op">(</span><span class="va">project_metadata</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">$</span><span class="va">Time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">$</span><span class="va">Concentration_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">$</span><span class="va">Concentration_1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="check-column-names">Check column names<a class="anchor" aria-label="anchor" href="#check-column-names"></a>
</h3>
<p>Check the column names of the metadata file. The metadata file should
contain the following columns:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plate_ID"        "Well_ID"         "Row"             "Column"         </span></span>
<span><span class="co">#&gt;  [5] "Species"         "Cell_type"       "Model_type"      "Time"           </span></span>
<span><span class="co">#&gt;  [9] "Unit"            "Treatment_1"     "Concentration_1" "Unit_1"         </span></span>
<span><span class="co">#&gt; [13] "Sample_type"     "Barcode"         "Project"</span></span></code></pre></div>
<p>Make sure that the column names are correct and match the expected
format.</p>
</div>
<div class="section level3">
<h3 id="validate-metadata">Validate metadata<a class="anchor" aria-label="anchor" href="#validate-metadata"></a>
</h3>
<p>The <code>check_metadata</code> function will check the metadata file
for common errors, such as missing values, incorrect data types, and
other potential issues. It will also provide a summary of the metadata
file, including the number of samples, the number of variables, and the
number of missing values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validate metadata</span></span>
<span><span class="fu"><a href="../reference/validate_metadata.html">validate_metadata</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Validation Issues:</span></span>
<span><span class="co">#&gt; Model_type: Contains special characters.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Generating summary table grouped by Plate_ID...</span></span>
<span><span class="co">#&gt;   Plate_ID count_Species count_Cell_type count_Model_type count_Time count_Unit</span></span>
<span><span class="co">#&gt; 1 PMMSq033             1               3                3          1          1</span></span>
<span><span class="co">#&gt;   count_Treatment_1 count_Concentration_1 count_Unit_1 count_Sample_type</span></span>
<span><span class="co">#&gt; 1                36                     4            1                 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualize-metadata">Visualize metadata<a class="anchor" aria-label="anchor" href="#visualize-metadata"></a>
</h3>
<p>Lastly, let’s visually inspect the large number of experimental
variables, in order to correct artefacts and other metadata errors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_metadata_heatmap.html">plot_metadata_heatmap</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p><img src="metadata_check_files/figure-html/metadata_plot-1.png" width="768"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nenad Bartonicek, Xin Liu, Laura Twomey, Michelle Meier, Richard Lupat, Stuart Craig, David Yoannidis, Jason Li, Tim Semple, Kaylene J Simpson, Mark X Li, Susanne Ramm.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
