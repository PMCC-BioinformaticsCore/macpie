<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Check the metadata file â€¢ macpie</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Check the metadata file">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">macpie</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/metadata_check.html">Metadata check</a>
    </li>
    <li>
      <a href="../articles/quality_control.html">Quality control</a>
    </li>
    <li>
      <a href="../articles/differential_expression.html">Transcriptional analyses</a>
    </li>
    <li class="dropdown-header">Compound screening</li>
    <li>
      <a href="../articles/macpie_conversion.html">Interoperability</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PMCC-BioinformaticsCore/macpie.git">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Check the metadata file</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PMCC-BioinformaticsCore/macpie.git/blob/HEAD/vignettes/metadata_check.Rmd"><code>vignettes/metadata_check.Rmd</code></a></small>
      <div class="hidden name"><code>metadata_check.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="metadata-import-and-validation">Metadata import and validation<a class="anchor" aria-label="anchor" href="#metadata-import-and-validation"></a>
</h2>
<p>As part of the macpie package, we provide a set of functions to
import and validate metadata. The metadata file should contain all the
information about the samples, including sample names, experimental
conditions, and other relevant variables. The metadata file has to be in
a tabular format.</p>
<p><strong>Key points</strong>:</p>
<ul>
<li><p>use <strong>check_metadata</strong> to check the metadata file
for common errors</p></li>
<li><p>use <strong>plot_metadata_heatmap</strong> to visually inspect
metadata integrity</p></li>
</ul>
<div class="section level3">
<h3 id="metadata-input">Metadata input<a class="anchor" aria-label="anchor" href="#metadata-input"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/PMCC-BioinformaticsCore/macpie.git">macpie</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define project variables</span></span>
<span><span class="va">project_name</span> <span class="op">&lt;-</span> <span class="st">"PMMSq033"</span></span>
<span><span class="va">project_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/PMMSq033_metadata.csv"</span>, package <span class="op">=</span> <span class="st">"macpie"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load metadata</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_metadata.html">read_metadata</a></span><span class="op">(</span><span class="va">project_metadata</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">$</span><span class="va">Time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="va">metadata</span><span class="op">$</span><span class="va">Concentration_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">$</span><span class="va">Concentration_1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="check-column-names">Check column names<a class="anchor" aria-label="anchor" href="#check-column-names"></a>
</h3>
<p>Check the column names of the metadata file. The metadata file should
contain the following columns:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plate_ID"        "Well_ID"         "Row"             "Column"         </span></span>
<span><span class="co">#&gt;  [5] "Species"         "Cell_type"       "Model_type"      "Time"           </span></span>
<span><span class="co">#&gt;  [9] "Unit"            "Treatment_1"     "Concentration_1" "Unit_1"         </span></span>
<span><span class="co">#&gt; [13] "Sample_type"     "Barcode"         "Project"</span></span></code></pre></div>
<p>Make sure that the column names are correct and match the expected
format.</p>
</div>
<div class="section level3">
<h3 id="validate-metadata">Validate metadata<a class="anchor" aria-label="anchor" href="#validate-metadata"></a>
</h3>
<p>The <code>check_metadata</code> function will check the metadata file
for common errors, such as missing values, incorrect data types, and
other potential issues. It will also provide a summary of the metadata
file, including the number of samples, the number of variables, and the
number of missing values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validate metadata</span></span>
<span><span class="fu"><a href="../reference/validate_metadata.html">validate_metadata</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Validation Issues:</span></span>
<span><span class="co">#&gt; Model_type: Contains special characters.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Generating summary table grouped by Plate_ID...</span></span>
<span><span class="co">#&gt;   Plate_ID count_Species count_Cell_type count_Model_type count_Time count_Unit</span></span>
<span><span class="co">#&gt; 1 PMMSq033             1               3                3          1          1</span></span>
<span><span class="co">#&gt;   count_Treatment_1 count_Concentration_1 count_Unit_1 count_Sample_type</span></span>
<span><span class="co">#&gt; 1                36                     4            1                 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualize-metadata">Visualize metadata<a class="anchor" aria-label="anchor" href="#visualize-metadata"></a>
</h3>
<p>Lastly, letâ€™s visually inspect the large number of experimental
variables, in order to correct artefacts and other metadata errors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_metadata_heatmap.html">plot_metadata_heatmap</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p><img src="metadata_check_files/figure-html/metadata_plot-1.png" width="768"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nenad Bartonicek, Xin Liu, Laura Twomey, Michelle Meier, Richard Lupat, Stuart Craig, David Yoannidis, Jason Li, Tim Semple, Kaylene J Simpson, Mark X Li, Susanne Ramm.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
